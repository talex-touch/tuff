# Tuff é¡¹ç›®å¾…åŠäº‹é¡¹

> ä» PRD æ–‡æ¡£ä¸­æç‚¼çš„æœªå®Œæˆä»»åŠ¡æ¸…å•
> æ›´æ–°æ—¶é—´: 2025-11-20

---

## ğŸ”´ P0 ç´§æ€¥ä»»åŠ¡

### æ¨¡å—æ—¥å¿—ç³»ç»Ÿ
**æ¥æº**: `plan-prd/02-architecture/module-logging-system-prd.md`
**å·¥æœŸ**: 8-11 å¤©

- [ ] **Phase 1**: æ ¸å¿ƒå®ç° (2-3å¤©)
  - [ ] å®ç° LogLevel æšä¸¾
  - [ ] å®ç° ModuleLogger ç±» (debug/info/warn/error)
  - [ ] å®ç° LoggerManager å•ä¾‹
  - [ ] é…ç½®è¯»å–/ä¿å­˜åˆ° app-setting.ini
  - [ ] å¯¼å‡ºåˆ° @talex-touch/utils

- [ ] **Phase 2**: è¿ç§» SearchEngine (1-2å¤©)
  - [ ] è¿ç§» search-core.ts
  - [ ] è¿ç§» search-gatherer.ts
  - [ ] ä¿ç•™ searchLogger ç‰¹æ®ŠåŠŸèƒ½

- [ ] **Phase 3**: è¿ç§» Provider (1å¤©)
  - [ ] FileProvider
  - [ ] AppProvider
  - [ ] PluginFeaturesAdapter

- [ ] **Phase 4**: è¿ç§»æ ¸å¿ƒæ¨¡å— (2-3å¤©)
  - [ ] DatabaseModule
  - [ ] StorageModule
  - [ ] PluginModule
  - [ ] ChannelCore

- [ ] **Phase 5**: UI é…ç½®ç•Œé¢ (2å¤©) - å¯é€‰
  - [ ] è®¾è®¡é…ç½®é¡µé¢
  - [ ] æ¨¡å—åˆ—è¡¨å±•ç¤º
  - [ ] å•ä¸ªæ¨¡å—å¼€å…³/çº§åˆ«æ§åˆ¶

**éªŒæ”¶æ ‡å‡†**:
- 90% æ ¸å¿ƒæ¨¡å—ä½¿ç”¨ç»Ÿä¸€ Logger
- æ—¥å¿—ç¦ç”¨æ—¶æ€§èƒ½å¼€é”€ < 1%
- é…ç½®ä¿®æ”¹ < 100ms ç”Ÿæ•ˆ

---

## ğŸŸ¡ P1 é‡è¦ä»»åŠ¡

### 1. æ‰˜ç›˜ç³»ç»Ÿä¼˜åŒ–
**æ¥æº**: `plan-prd/01-project/DESIGN_IMPROVEMENTS.md`
**å·¥æœŸ**: 5-7 å¤©

- [ ] æ–°å¢ 9 ä¸ªæ‰˜ç›˜èœå•é¡¹
  - [ ] æ˜¾ç¤º/éšè—ä¸»çª—å£
  - [ ] æ‰“å¼€ CoreBox
  - [ ] ä¸‹è½½ä¸­å¿ƒ (åŠ¨æ€å¾½ç« )
  - [ ] å‰ªè´´æ¿å†å²
  - [ ] ç»ˆç«¯
  - [ ] è®¾ç½®
  - [ ] å…³äº (å­èœå•)
  - [ ] é‡å¯åº”ç”¨
  - [ ] é€€å‡º
- [ ] ä½¿ç”¨æœ¬åœ°å›¾æ ‡èµ„æº
- [ ] macOS Template å›¾æ ‡ (é»‘ç™½å•è‰²)
- [ ] çª—å£å…³é—­è¡Œä¸ºé…ç½®
- [ ] å›½é™…åŒ–æ”¯æŒ

---

### 2. ~~åºŸå¼ƒ extract-icon API~~ âœ… å·²å®Œæˆ
**æ¥æº**: `plan-prd/01-project/DESIGN_IMPROVEMENTS.md`
**çŠ¶æ€**: 2025-11 å®Œæˆ

- [x] è¿ç§»æ‰€æœ‰ä½¿ç”¨ `file:extract-icon` çš„ä»£ç  (18 ä¸ªç»„ä»¶)
- [x] æ”¹ä¸ºä½¿ç”¨ `tfile://` åè®®  
- [x] æ›´æ–°æ–‡ä»¶å›¾æ ‡åŠ è½½ç»„ä»¶
- [x] æ€§èƒ½æå‡è¾¾æˆ: 50-100ms â†’ <10ms (70%+ æå‡)

**è¯¦è§**: å·²å®ŒæˆåŠŸèƒ½æ€»ç»“æ–‡æ¡£

---

### 3. View Mode ä¸å¼€å‘æ¨¡å¼å¢å¼º
**æ¥æº**: `plan-prd/03-features/view/view-mode-prd.md`
**å·¥æœŸ**: 10-15 å¤©

- [ ] **Phase 1**: ç»“æ„æ‹†åˆ† (2å¤©)
  - [ ] æ‹†åˆ† plugin-core.ts

- [ ] **Phase 2**: ç±»å‹å¢å¼º (1å¤©)
  - [ ] å¢å¼º IPluginWebview (æ”¹ä¸º Map)
  - [ ] å¢å¼º IPluginDev (æ·»åŠ  source)
  - [ ] æ‰©å±• PluginIssue (code/suggestion/timestamp)

- [ ] **Phase 3**: æ ¸å¿ƒæ”¹é€  (4-5å¤©)
  - [ ] æ’ä»¶åŠ è½½é€»è¾‘ - è¿œç¨‹ manifest è¦†ç›–
  - [ ] Dev Server å¥åº·æ¢æµ‹æœºåˆ¶
  - [ ] CoreBoxManager å®‰å…¨ URL æ„é€ 
  - [ ] åè®®é™åˆ¶ (ç”Ÿäº§ç¯å¢ƒç¦æ­¢ http)
  - [ ] Hash è·¯ç”±å¼ºåˆ¶æ£€æŸ¥

- [ ] **Phase 4**: é…ç½®æ’ä»¶ (2-3å¤©)
  - [ ] touch-translation æ’ä»¶ dev é…ç½®
  - [ ] æ·»åŠ "å¤šæºç¿»è¯‘" view feature

**éªŒæ”¶æ ‡å‡†**:
- view æ¨¡å¼åœ¨ç”Ÿäº§/è°ƒè¯•/æºç å¼€å‘ä¸‰ç§æ¨¡å¼å‡æ­£å¸¸
- Dev Server æ–­å¼€èƒ½ä¼˜é›…å¤„ç†
- ç”Ÿäº§ç¯å¢ƒä¸¥æ ¼ç¦æ­¢ http åè®®

---

### 4. ç›´æ¥é¢„è§ˆè®¡ç®—èƒ½åŠ›
**æ¥æº**: `plan-prd/04-implementation/performance/direct-preview-calculation-prd.md`
**å·¥æœŸ**: 14-20 å¤©

- [ ] **Phase 0**: å‡†å¤‡å·¥ä½œ (2å¤©)
  - [ ] Unit/FX æ•°æ®å‡†å¤‡
  - [ ] åº“é€‰å‹ (mathjs/decimal.js)
  - [ ] æ²™ç®± PoC

- [ ] **Phase 1**: è¡¨è¾¾å¼ + å•ä½æ¢ç®— (5-6å¤©)
  - [ ] CalculationPreviewService (Main)
  - [ ] ExpressionEvaluator (mathjs)
  - [ ] UnitRegistry (JSON é…ç½®)
  - [ ] æŸ¥è¯¢è¯†åˆ«æ­£åˆ™
  - [ ] PreviewCard ç»„ä»¶
  - [ ] å¤åˆ¶ç»“æœäº¤äº’

- [ ] **Phase 2**: æ±‡ç‡ + æ—¥æœŸæ—¶é—´ (4-5å¤©)
  - [ ] FxRateProvider (ECB API)
  - [ ] æ±‡ç‡å®šæ—¶åˆ·æ–° Cron
  - [ ] TimeEngine (luxon)
  - [ ] æ—¶åŒºè§£æ

- [ ] **Phase 3**: ç»„åˆæŸ¥è¯¢/å˜é‡ (3-4å¤©)
  - [ ] å˜é‡æ”¯æŒ (let foo = 18kg)
  - [ ] ç»„åˆæŸ¥è¯¢è§£æ
  - [ ] æŒ‡æ ‡åŸ‹ç‚¹
  - [ ] å†å²è®°å½• (å¤ç”¨ clipboard_history)

**éªŒæ”¶æ ‡å‡†**:
- ç®—å¼/å•ä½/æ±‡ç‡/æ—¶é—´å‘½ä¸­ç‡ â‰¥ 95%
- å¹³å‡å“åº” < 50ms
- ç»“æœå¡ç‰‡åœ¨æœç´¢ç»“æœé¦–è¡Œ
- æ–­ç½‘æƒ…å†µä¸‹æ˜¾ç¤ºæœ€è¿‘æ±‡ç‡å¿«ç…§

---

## ğŸŸ¢ P2 å¢å¼ºä»»åŠ¡

### 1. Flow Transfer æµè½¬èƒ½åŠ›
**æ¥æº**: `plan-prd/03-features/flow-transfer-prd.md`
**å·¥æœŸ**: 15-20 å¤©

- [ ] **Phase 1**: Manifest & ç±»å‹å®šä¹‰ (2-3å¤©)
  - [ ] æ‰©å±• PluginManifest (flowTargets)
  - [ ] æ–°å¢ Flow ç±»å‹ (FlowPayload/FlowTarget/FlowSession)

- [ ] **Phase 2**: Flow Bus æ ¸å¿ƒ (4-5å¤©)
  - [ ] ä¸»è¿›ç¨‹ FlowBus è°ƒåº¦æ¨¡å—
  - [ ] IPC é€šé“æ³¨å†Œ
  - [ ] ç›®æ ‡æ³¨å†Œä¸ç´¢å¼•ç»´æŠ¤

- [ ] **Phase 3**: SDK & API (2-3å¤©)
  - [ ] flow.dispatch() API
  - [ ] flow.onSessionUpdate() äº‹ä»¶
  - [ ] TypeScript ç±»å‹å®šä¹‰

- [ ] **Phase 4**: UI é¢æ¿ (3-4å¤©)
  - [ ] FlowSelector ç»„ä»¶
  - [ ] ç›®æ ‡å¡ç‰‡å±•ç¤º
  - [ ] æˆæƒå¯¹è¯æ¡†

- [ ] **Phase 5**: ä¼šè¯ & æ—¥å¿— (2-3å¤©)
  - [ ] Session çŠ¶æ€è·Ÿè¸ª
  - [ ] å®¡è®¡æ—¥å¿—
  - [ ] å¤±è´¥å›é€€é€»è¾‘

- [ ] **Phase 6**: æµ‹è¯•æ’ä»¶ (1-2å¤©)
  - [ ] å‘é€æ’ä»¶ç¤ºä¾‹
  - [ ] æ¥æ”¶æ’ä»¶ç¤ºä¾‹
  - [ ] ç«¯åˆ°ç«¯éªŒè¯

**éªŒæ”¶æ ‡å‡†**:
- æ’ä»¶èƒ½ä¼ é€’æ–‡æœ¬/JSON/File ä¸‰ç±»è½½è·
- æµè½¬é¢æ¿æ“ä½œæµç•…
- æƒé™æ§ä»¶æœ‰æ•ˆ
- Session çŠ¶æ€å¯è¿½è¸ª

---

### 2. DivisionBox æ·±åŒ–
**æ¥æº**: `plan-prd/03-features/division-box-prd.md`
**å·¥æœŸ**: 10-15 å¤©

- [ ] **Phase 1**: Manager æ¶æ„ (3-4å¤©)
  - [ ] DivisionBoxManager ç±»
  - [ ] Session ç”Ÿå‘½å‘¨æœŸç®¡ç†

- [ ] **Phase 2**: UI Shell & Store (3-4å¤©)
  - [ ] DivisionBoxShell Vue ç»„ä»¶
  - [ ] useDivisionBoxStore

- [ ] **Phase 3**: SDK æ‰©å±• (2-3å¤©)
  - [ ] plugin.divisionBox.open() API
  - [ ] Manifest divisionBox é…ç½®å—

- [ ] **Phase 4**: ç¼“å­˜/æ¢å¤ (2-3å¤©)
  - [ ] keepAlive æœºåˆ¶
  - [ ] çŠ¶æ€æŒä¹…åŒ–

**éªŒæ”¶æ ‡å‡†**:
- æ’ä»¶èƒ½åˆ›å»º/å…³é—­/æ¢å¤ DivisionBox
- æ”¶åˆ°å®Œæ•´ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
- æ€§èƒ½æŒ‡æ ‡æ»¡è¶³: <250ms é¦–å¸§, <120ms æ¢å¤

---

### 3. å¤šè§†å›¾å¹¶è¡Œå…±å­˜
**æ¥æº**: `plan-prd/03-features/view/multi-attach-view-prd.md`
**å·¥æœŸ**: 10-15 å¤©

- [ ] **Phase 1**: å®¹å™¨æ”¹é€  (3-4å¤©)
  - [ ] MultiViewHost ç®¡ç†å™¨
  - [ ] Map<panelId, AttachedView[]>

- [ ] **Phase 2**: å‰ç«¯ç»„ä»¶ (4-5å¤©)
  - [ ] ViewDock ç»„ä»¶ (Tab/Split/Grid)
  - [ ] æ‹–æ‹½äº¤äº’
  - [ ] useDivisionBoxStore å¤šè§†å›¾æ”¯æŒ

- [ ] **Phase 3**: SDK é€‚é… (2-3å¤©)
  - [ ] plugin.uiView.onFocusChange()
  - [ ] plugin.uiView.getLayout()
  - [ ] Manifest uiView.supportedLayouts

**éªŒæ”¶æ ‡å‡†**:
- å• CoreBox æˆåŠŸå¹¶è¡ŒæŒ‚è½½ 3 ä¸ªè§†å›¾
- æ”¯æŒ 3 ç§å¸ƒå±€æ¨¡å¼åˆ‡æ¢
- FPS â‰¥ 40

---

### 4. AttachUIView ç¼“å­˜ä¼˜åŒ–
**æ¥æº**: `plan-prd/03-features/view/attach-view-cache-prd.md`
**å·¥æœŸ**: 10-12 å¤©

- [ ] **Phase 1**: ä½¿ç”¨æ•°æ®é‡‡é›† (2-3å¤©)
  - [ ] æ‰“é€šè§†å›¾ä½¿ç”¨åŸ‹ç‚¹
  - [ ] å»ºç«‹ ViewUsageStore

- [ ] **Phase 2**: Score æ¨¡å‹ (2-3å¤©)
  - [ ] å®šæ—¶ä»»åŠ¡è®¡ç®— ViewScore
  - [ ] å¯è§†åŒ–æŒ‡æ ‡

- [ ] **Phase 3**: ç¼“å­˜ç®¡ç†å™¨ (3-4å¤©)
  - [ ] Hot/Warm/Cool é˜¶æ®µå®ç°
  - [ ] LRU å›æ”¶æœºåˆ¶

- [ ] **Phase 4**: SDK æ¥å£ (2å¤©)
  - [ ] requestPreload() API
  - [ ] setCachePolicy()
  - [ ] onEvicted() å›è°ƒ

**éªŒæ”¶æ ‡å‡†**:
- ç¼“å­˜å‘½ä¸­ç‡ â‰¥ 70%
- å¹³å‡æ‰“å¼€æ—¶å»¶ä¸‹é™ â‰¥ 40%
- é«˜é¢‘è§†å›¾æ‰“å¼€ < 200ms

---

### 5. æ™ºèƒ½æ¨èç³»ç»Ÿ
**æ¥æº**: `plan-prd/03-features/search/intelligent-recommendation-system-prd.md`
**å·¥æœŸ**: 15-22 å¤©

- [ ] **Phase 1**: åŸºç¡€æ¨è (5-7å¤©)
  - [ ] æ—¶é—´ä¸Šä¸‹æ–‡æ¨è
  - [ ] åŸºäºé¢‘ç‡çš„ç®€å•æ¨è
  - [ ] UI é›†æˆ "ä¸ºä½ æ¨è"

- [ ] **Phase 2**: ä¸Šä¸‹æ–‡æ„ŸçŸ¥ (5-7å¤©)
  - [ ] å‰ªè´´æ¿æ™ºèƒ½
  - [ ] å‰å°åº”ç”¨å…³è”
  - [ ] æ¨èç†ç”±å±•ç¤º

- [ ] **Phase 3**: ä¼˜åŒ–è¿­ä»£ (3-5å¤©)
  - [ ] å¤šæ ·æ€§è°ƒæ•´ç®—æ³•
  - [ ] æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜
  - [ ] æ¨èæ—¥å¿—åˆ†æ

- [ ] **Phase 4**: ç”¨æˆ·æ§åˆ¶ (2-3å¤©)
  - [ ] è®¾ç½®é¢æ¿
  - [ ] æ•°æ®é‡ç½®
  - [ ] åé¦ˆæœºåˆ¶

**éªŒæ”¶æ ‡å‡†**:
- 30%+ ç”¨æˆ·å¯ç”¨æ¨è
- æ¨èç‚¹å‡»ç‡ > 15%
- å¹³å‡å‡å°‘ 1.5 æ¬¡è¾“å…¥/ä¼šè¯

---

## ğŸ”µ P3 é•¿æœŸè§„åˆ’

### 1. å¹³å°èƒ½åŠ›ä½“ç³»
**æ¥æº**: `plan-prd/02-architecture/platform-capabilities-prd.md`
**å·¥æœŸ**: 20-30 å¤©

- [ ] èƒ½åŠ›æ¨¡å‹è®¾è®¡
- [ ] PlatformCoreService å®ç°
- [ ] SDK å°è£… (platform.invoke)
- [ ] ç®¡ç† UI
- [ ] æ•°æ®ä¸ç›‘æ§
- [ ] æ–‡æ¡£ä¸ç”Ÿæ€æ¨å¹¿

---

### 2. AI èƒ½åŠ›æ³›åŒ–æ¥å£
**æ¥æº**: `plan-prd/02-architecture/ai-power-generic-api-prd.md`
**å·¥æœŸ**: 15-20 å¤©

- [ ] èƒ½åŠ›æè¿°ä½“ç³» (AiCapabilityRegistry)
- [ ] Provider æ¥å…¥æ¡†æ¶
- [ ] ç­–ç•¥å¼•æ“ (RuleBased/Adaptive)
- [ ] SDK å°è£… (ai.invoke)
- [ ] è§‚æµ‹ & è®¡è´¹
- [ ] Demo & æ–‡æ¡£

---

### 3. æ—¥å†æ’ä»¶
**æ¥æº**: `plan-prd/01-project/CALENDAR-PRD.md`
**å·¥æœŸ**: 8-11 å¤©

- [ ] **Phase 1**: æ ¸å¿ƒåŠŸèƒ½ (3-4å¤©)
  - [ ] æ•°æ®åº“è®¾è®¡ (SQLite)
  - [ ] äº‹ä»¶ CRUD æ“ä½œ
  - [ ] æœˆè§†å›¾æ—¥å†ç»„ä»¶

- [ ] **Phase 2**: æé†’ç³»ç»Ÿ (2-3å¤©)
  - [ ] æé†’è°ƒåº¦å™¨
  - [ ] ç³»ç»Ÿé€šçŸ¥é›†æˆ
  - [ ] é‡å¤äº‹ä»¶æ”¯æŒ

- [ ] **Phase 3**: CoreBox é›†æˆ (1-2å¤©)
  - [ ] æ³¨å†Œ Feature (ä»Šå¤©/today)
  - [ ] å¿«é€Ÿåˆ›å»ºäº‹ä»¶
  - [ ] æœç´¢äº‹ä»¶

- [ ] **Phase 4**: UI ä¼˜åŒ– (2å¤©)
  - [ ] å‘¨è§†å›¾/æ—¥è§†å›¾
  - [ ] äº‹ä»¶æ‹–æ‹½
  - [ ] ä¸»é¢˜é€‚é…

---

## ï¿½ å·²å®ŒæˆåŠŸèƒ½å¤‡æ³¨

> **2025-11 UI/UX æ”¹è¿›**: å®Œæˆ 15+ é¡¹é¡µé¢é‡æ„ä¸ä¼˜åŒ–ï¼Œè¯¦è§ `å®ŒæˆåŠŸèƒ½æ€»ç»“æ–‡æ¡£`
>
> - ç™»å½•/ä¸ªäººèµ„æ–™/æ¬¢è¿/æ‰“å¡/ç»Ÿè®¡é¡µé¢é‡æ„
> - å…¨å±€æç®€é»‘ç™½é£æ ¼ç»Ÿä¸€
> - çŠ¶æ€æ ç§»é™¤ä¸å¯¼èˆªä¼˜åŒ–
> - tfile:// åè®®å…¨é¢å®æ–½

---

## ï¿½ğŸ“Š ä»»åŠ¡ç»Ÿè®¡

| ä¼˜å…ˆçº§ | ä»»åŠ¡æ•° | æ€»å·¥æœŸ | çŠ¶æ€ |
|--------|--------|--------|------|
| P0 ç´§æ€¥ | 1 | 8-11 å¤© | å¾…å¯åŠ¨ |
| P1 é‡è¦ | 3 | 35-56 å¤© | å¾…æ’æœŸ |
| P2 å¢å¼º | 5 | 70-99 å¤© | è§„åˆ’ä¸­ |
| P3 é•¿æœŸ | 3 | 43-61 å¤© | è§„åˆ’ä¸­ |
| **æ€»è®¡** | **12** | **156-227 å¤©** | - |

---

## ğŸ¯ å»ºè®®å®æ–½é¡ºåº

### Q1 2026 (1-3æœˆ)
1. æ¨¡å—æ—¥å¿—ç³»ç»Ÿ (P0)
2. æ‰˜ç›˜ç³»ç»Ÿä¼˜åŒ– (P1)
3. åºŸå¼ƒ extract-icon (P1)
4. ç›´æ¥é¢„è§ˆè®¡ç®— (P1)

### Q2 2026 (4-6æœˆ)
5. View Mode å¢å¼º (P1)
6. Flow Transfer (P2)
7. DivisionBox æ·±åŒ– (P2)

### Q3 2026 (7-9æœˆ)
8. å¤šè§†å›¾å¹¶è¡Œ (P2)
9. AttachUIView ç¼“å­˜ (P2)
10. æ™ºèƒ½æ¨èç³»ç»Ÿ (P2)

### Q4 2026 (10-12æœˆ)
11. å¹³å°èƒ½åŠ›ä½“ç³» (P3)
12. AI èƒ½åŠ›æ¥å£ (P3)
13. æ—¥å†æ’ä»¶ (P3)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**ç”Ÿæˆæ—¶é—´**: 2025-11-20
**ç»´æŠ¤è€…**: Development Team
