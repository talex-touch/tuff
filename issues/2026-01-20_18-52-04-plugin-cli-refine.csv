"id","priority","phase","area","title","description","acceptance_criteria","test_mcp","review_initial_requirements","review_regression_requirements","dev_state","review_initial_state","review_regression_state","git_state","owner","refs","notes"
"TUFFCLI-010","P1","1","backend","Define command scope and success criteria","Define expected behavior for create/build/dev/publish/validate based on PRD and current CLI.","Single source doc lists each command, flags, inputs/outputs, and success/failure criteria; deltas vs current CLI recorded.","AUTOSERVER","Scope aligns with PRD; backward-incompatible changes require migration notes.","Re-check scope list against updated CLI help and docs.","已完成","已完成","已完成","已提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:17;docs/plan-prd/06-ecosystem/TUFFCLI-PRD.md:12;docs/plan-prd/06-ecosystem/TUFFCLI-INVENTORY.md:1;packages/unplugin-export-plugin/src/bin/tuff.ts:1;packages/unplugin-export-plugin/src/cli/commands/create.ts:1","picked_reason:scope + success criteria needed before UX/doc alignment | done_at:2026-01-20T12:06:53Z | validation_limited:doc-only change; manual_test:review TUFFCLI-INVENTORY.md and compare with CLI help output; evidence:success/failure criteria and delta list captured; risk:low"
"TUFFCLI-020","P1","2","backend","Inventory CLI entrypoints and flags","Map current CLI commands, aliases, and flags to identify conflicts and missing features.","Inventory includes command names, flags, and current behavior; gap list reviewed and agreed.","AUTOSERVER","Include interactive mode and build/builder alias mapping.","Re-validate inventory after CLI changes.","已完成","已完成","已完成","已提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:18;docs/plan-prd/06-ecosystem/TUFFCLI-INVENTORY.md:1;packages/unplugin-export-plugin/src/bin/tuff.ts:1;packages/unplugin-export-plugin/src/cli/commands/create.ts:1","picked_reason:inventory needed to anchor scope and delta tracking | done_at:2026-01-20T12:03:24Z | validation_limited:doc-only change; manual_test:review TUFFCLI-INVENTORY.md content against CLI help output; evidence:inventory + gap list added; risk:low"
"TUFFCLI-030","P1","3","backend","Unify config model and precedence","Design and implement a unified config model (tuff.config.ts + manifest fields) with clear precedence and defaults.","Config loads correctly; precedence is CLI > config > manifest > defaults; validation errors are actionable.","AUTOSERVER","Ensure deprecated fields have migration path and warnings.","Verify config precedence across sample projects.","已完成","已完成","已完成","已提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:19;docs/plan-prd/06-ecosystem/TUFFCLI-PRD.md:92;packages/unplugin-export-plugin/src/types.ts:1;packages/unplugin-export-plugin/src/core/config.ts:1;packages/unplugin-export-plugin/src/bin/tuff.ts:1;packages/unplugin-export-plugin/src/core/publish.ts:1","picked_reason:config model underpins build/dev/publish behavior | done_at:2026-01-20T11:56:25Z | validation_limited:config merge not exercised in runtime; manual_test:pnpm -C ""packages/unplugin-export-plugin"" run build && node dist/bin/tuff.js build --help && node dist/bin/tuff.js dev --help && node dist/bin/tuff.js publish --help; evidence:resolveBuildConfig/resolveDevConfig/resolvePublishConfig now drive CLI defaults; risk:medium precedence not verified against sample project"
"TUFFCLI-040","P0","4","backend","Implement tuff dev with HMR wiring","Wire Vite dev server and unplugin HMR, including index/ and manifest watcher behavior.","tuff dev starts a dev server; changes in manifest/index or index/ trigger update events; errors exit with nonzero code.","AUTOE2E","Confirm watcher coverage and no unexpected filesystem access outside project root.","Run manual HMR smoke test on sample plugin and verify no stale logic.","已完成","已完成","已完成","已提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:20;docs/plan-prd/06-ecosystem/TUFFCLI-PRD.md:59;packages/unplugin-export-plugin/src/index.ts:128;packages/unplugin-export-plugin/src/core/dev.ts:7;packages/unplugin-export-plugin/src/bin/tuff.ts:1","picked_reason:P0 dev server capability unblocks plugin workflow | done_at:2026-01-20T11:03:58.639916+00:00 | validation_limited:dev server not launched in this environment; manual_test:pnpm -C ""packages/unplugin-export-plugin"" run build && node dist/bin/tuff.js dev --help && node dist/bin/tuff.js dev --port 5173; evidence:runDev wiring added and command/menu/help updated; risk:medium missing runtime verification | blocked:git commit failed commitlint type/subject empty | blocked_resolved:commitlint"
"TUFFCLI-050","P0","5","backend","Rework tuff build pipeline","Orchestrate Vite build plus tpex packaging, and add watch/dev/output flags mapped to config.","tuff build produces dist/build/*.tpex after Vite build; flags --watch/--dev/--output are honored; failures surface clear errors.","AUTOSERVER","Ensure build remains backward-compatible with existing project structure.","Run build on at least one existing plugin template and confirm outputs.","已完成","已完成","已完成","已提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:21;docs/plan-prd/06-ecosystem/TUFFCLI-PRD.md:23;packages/unplugin-export-plugin/src/core/exporter.ts:262;packages/unplugin-export-plugin/src/bin/tuff.ts:1","picked_reason:P0 build pipeline is core delivery path | done_at:2026-01-20T19:30:43+08:00 | validation_limited:build pipeline not run in this environment; manual_test:pnpm -C ""packages/unplugin-export-plugin"" run build && node dist/bin/tuff.js build --help && node dist/bin/tuff.js build --dev --output dist-dev; evidence:runBuild now invokes Vite build then packaging with --watch/--dev/--output parsing; risk:medium runtime build not exercised"
"TUFFCLI-060","P0","6","backend","Align tuff publish with plugin artifacts","Publish .tpex artifacts with validation and optional dry-run, and separate app-release publishing if needed.","tuff publish targets .tpex output; validates manifest/package versions; supports --dry-run; app-release publishing is separated or renamed.","AUTOSERVER","Confirm auth token handling and registry/API expectations.","Run publish dry-run and validate no network side effects.","已完成","已完成","已完成","已提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:22;docs/plan-prd/06-ecosystem/TUFFCLI-PRD.md:42;packages/unplugin-export-plugin/src/core/publish.ts:1","picked_reason:P0 publish flow currently targets app releases, needs plugin alignment | done_at:2026-01-20T19:42:09+08:00 | validation_limited:publish not executed against live API; manual_test:pnpm -C ""packages/unplugin-export-plugin"" run build && node dist/bin/tuff.js publish --dry-run --tag 1.0.0 --channel RELEASE; evidence:publish scans .tpex packages, validates versions, uploads via form-data; risk:medium publish API compatibility unverified"
"TUFFCLI-070","P1","7","backend","Finalize index/ bundling rules","Define deterministic entry resolution and precedence for index.js vs index/, plus optional build:index command.","Entry resolution rules are enforced; config overrides supported; build:index (if kept) functions and is documented.","AUTOSERVER","Verify externals and sourcemap settings for node runtime.","Validate bundling on plugins with both index.js and index/ folder.","已完成","已完成","已完成","已提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:23;packages/unplugin-export-plugin/docs/INDEX-FOLDER-BUNDLING.md:1;packages/unplugin-export-plugin/docs/index-folder-indexjs.md:1;packages/unplugin-export-plugin/src/core/exporter.ts:160","picked_reason:bundling precedence impacts build stability | done_at:2026-01-20T12:12:39Z | validation_limited:build not run in this environment; manual_test:pnpm -C ""packages/unplugin-export-plugin"" run build && node dist/bin/tuff.js build --output dist && verify index.js precedence with root/index/ cases; evidence:entry precedence + manifest.build.index override enforced and docs updated; risk:medium runtime bundling not exercised"
"TUFFCLI-080","P2","8","backend","Update UX, help, and docs","Update help output, error messages, i18n strings, and docs to match actual CLI behavior.","tuff help reflects current commands; errors are actionable; i18n covers new strings; docs/README are consistent.","AUTOSERVER","Check for stale command references and missing translations.","Re-run help output and compare against docs after changes.","已完成","已完成","已完成","已提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:24;packages/unplugin-export-plugin/src/bin/tuff.ts:1;apps/nexus/content/docs/dev/tools/tuff-cli.en.md:1;apps/nexus/content/docs/dev/tools/tuff-cli.zh.md:1;packages/unplugin-export-plugin/README.md:1","picked_reason:docs and help must match updated CLI behavior | done_at:2026-01-20T12:16:33Z | validation_limited:docs-only change; manual_test:run `tuff help` and compare docs output; evidence:help/about text updated and docs refreshed; risk:low"
"TUFFCLI-090","P1","9","backend","Add CLI tests and smoke checks","Add automated tests for config loading, entry detection, bundling, and command parsing, plus smoke checks.","Tests cover config load, entry detection, bundling, and command parsing; smoke checks run for dev/build/publish flows.","AUTOE2E","Ensure tests are stable and not dependent on external services by default.","Run full test suite and confirm no regressions in CLI outputs.","未开始","未开始","未开始","未提交","","plan/2026-01-20_18-48-52-plugin-cli-refine.md:25;packages/unplugin-export-plugin/src/bin/tuff.ts:154;packages/unplugin-export-plugin/src/core/exporter.ts:262",""
