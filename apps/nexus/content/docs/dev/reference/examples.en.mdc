# Examples

This page mirrors the repository `examples/` directory. Update the source files first, then sync the doc if needed.

## Plugin basics & lifecycle

### basic-usage.js
:::TuffCodeBlock{lang="js"}
---
code: |
  /**
   * Basic usage example
   * Shows how to send messages with the SDK
   */
  
  import { useTouchSDK } from '@talex-touch/utils/plugin/sdk'
  
  // Get SDK instance
  const sdk = useTouchSDK()
  
  // 2. Send messages to execute actions
  async function executeActions() {
    try {
      // Run search
      const searchResult = await sdk.sendMessage('search', {
        query: 'hello world',
        type: 'text',
      })
      console.log('Search result:', searchResult)
  
      // Run translation
      const translateResult = await sdk.sendMessage('translate', {
        text: 'Hello',
        from: 'en',
        to: 'zh',
      })
      console.log('Translate result:', translateResult)
  
      // Send notification
      await sdk.sendMessage('notify', {
        title: 'Plugin Message',
        body: 'This is a notification from plugin',
      })
    }
    catch (error) {
      console.error('Failed to execute actions:', error)
    }
  }
  
  // Handlers
  function handleSearch(data) {
    console.log('Handling search:', data)
    // Implement search logic
  }
  
  function handleTranslate(data) {
    console.log('Handling translate:', data)
    // Implement translation logic
  }
  
  function handleNotify(data) {
    console.log('Handling notify:', data)
    // Implement notification logic
  }
  
  // Export functions for external usage
  window.pluginBasicExample = {
    executeActions,
  }
---
:::

### complete-example.js
:::TuffCodeBlock{lang="js"}
---
code: |
  /**
   * Complete plugin example
   * Shows a complete plugin using the SDK
   */
  
  import { useTouchSDK } from '@talex-touch/utils/plugin/sdk'
  
  const sdk = useTouchSDK()
  
  // Plugin config
  const PLUGIN_CONFIG = {
    name: 'Example Plugin',
    version: '1.0.0',
    description: 'A complete example plugin',
    author: 'Talex Touch Team',
  }
  
  // Plugin initialization
  async function initializePlugin() {
    try {
      console.log(`[${PLUGIN_CONFIG.name}] Initializing...`)
  
      // Send init message
      await sdk.sendMessage('init', {
        config: PLUGIN_CONFIG,
        timestamp: Date.now(),
      })
  
      // Load user config
      const userConfig = await sdk.sendMessage('storage:get', {
        key: 'user_config',
      })
  
      if (!userConfig) {
        // Set default config
        await sdk.sendMessage('storage:set', {
          key: 'user_config',
          value: {
            theme: 'auto',
            language: 'zh-CN',
            notifications: true,
          },
        })
      }
  
      console.log(`[${PLUGIN_CONFIG.name}] Initialized successfully`)
    }
    catch (error) {
      console.error(`[${PLUGIN_CONFIG.name}] Initialization failed:`, error)
    }
  }
  
  // Demonstrate all features
  async function demonstrateAllFeatures() {
    try {
      console.log('=== Demonstrating All Features ===')
  
      // 1. Search feature
      console.log('1. Testing search...')
      await sdk.sendMessage('search', {
        query: 'hello world',
        type: 'text',
      })
  
      // 2. Translation feature
      console.log('2. Testing translation...')
      await sdk.sendMessage('translate', {
        text: 'Hello World',
        from: 'en',
        to: 'zh',
      })
  
      // 3. Notification feature
      console.log('3. Testing notification...')
      await sdk.sendMessage('notify', {
        title: 'Plugin Demo',
        body: 'All features working!',
        options: {
          icon: 'success',
          timeout: 2000,
        },
      })
  
      // 4. Storage feature
      console.log('4. Testing storage...')
      await sdk.sendMessage('storage:set', {
        key: 'demo_data',
        value: {
          message: 'Hello from plugin',
          timestamp: Date.now(),
        },
      })
  
      const storedData = await sdk.sendMessage('storage:get', {
        key: 'demo_data',
      })
      console.log('Stored data:', storedData)
  
      // 5. Clipboard feature
      console.log('5. Testing clipboard...')
      await sdk.sendMessage('clipboard:write', {
        content: 'Hello from Talex Touch Plugin!',
        type: 'text',
      })
  
      const clipboardContent = await sdk.sendMessage('clipboard:read', {
        type: 'text',
      })
      console.log('Clipboard content:', clipboardContent)
  
      console.log('=== All features demonstrated successfully ===')
    }
    catch (error) {
      console.error('Feature demonstration failed:', error)
    }
  }
  
  // Handlers
  function handleInit(data) {
    console.log('Plugin initialized with config:', data.config)
  }
  
  function handleSearch(data) {
    console.log('Searching for:', data.query, 'Type:', data.type)
    // Implement search logic
  }
  
  function handleTranslate(data) {
    console.log('Translating:', data.text, 'From:', data.from, 'To:', data.to)
    // Implement translation logic
  }
  
  function handleNotify(data) {
    console.log('Showing notification:', data.title, data.body)
    // Implement notification logic
  }
  
  function handleStorageGet(data) {
    console.log('Getting storage for key:', data.key)
    // Implement storage get logic
  }
  
  function handleStorageSet(data) {
    console.log('Setting storage:', data.key, data.value)
    // Implement storage set logic
  }
  
  function handleClipboardRead(data) {
    console.log('Reading clipboard, type:', data.type)
    // text
  }
  
  function handleClipboardWrite(data) {
    console.log('Writing to clipboard:', data.content, 'Type:', data.type)
    // text
  }
  
  // export
  window.completeExample = {
    initializePlugin,
    demonstrateAllFeatures,
  }
  
  // auto init
  initializePlugin()
---
:::

### index.js (SDK wrapper sample)
:::TuffCodeBlock{lang="js"}
---
code: |
  /**
   * Talex Touch Plugin SDK
   *
   * TextSDK - Text IFeatureLifeCycle Text
   */
  
  import { hasWindow } from '@talex-touch/utils/env'
  import { useChannel, usePluginInfo } from '@talex-touch/utils/plugin/sdk'
  
  // check runtime
  if (!hasWindow()) {
    throw new TypeError('[Plugin SDK] This SDK must run in a browser environment')
  }
  
  /**
   * TextSDK
   */
  class PluginSDK {
    constructor() {
      this.channel = useChannel('[Plugin SDK] Channel not available')
      this.plugin = usePluginInfo('[Plugin SDK] Plugin context not available')
      this.pluginName = this.plugin?.name || 'unknown'
  
      console.log(`[Plugin SDK] Initialized for plugin: ${this.pluginName}`)
    }
  
    /**
     * sendmessageText
     * @param {string} message - messageText
     * @param {any} data - message payload
     */
    async sendMessage(message, data = {}) {
      try {
        return await this.channel.send(`plugin:${this.pluginName}:${message}`, data)
      }
      catch (error) {
        console.error(`[Plugin SDK] Failed to send message: ${message}`, error)
        throw error
      }
    }
  
    /**
     * Text index:communicate Text
     * @param {string} targetPluginName - Text
     * @param {string} key - message key
     * @param {any} info - message payload
     */
    async communicateWithPlugin(targetPluginName, key, info = {}) {
      try {
        return await this.channel.send('index:communicate', {
          pluginName: targetPluginName,
          key,
          info,
        })
      }
      catch (error) {
        console.error(`[Plugin SDK] Failed to communicate with plugin ${targetPluginName}:`, error)
        throw error
      }
    }
  
    /**
     * get plugin info
     */
    getPluginInfo() {
      return {
        name: this.pluginName,
        version: this.plugin?.version || 'unknown',
        description: this.plugin?.desc || '',
        status: this.plugin?.status || 'unknown',
      }
    }
  
    /**
     * get raw channel（Text）
     */
    getChannel() {
      return this.channel
    }
  }
---
:::

### power-sdk-example.js
:::TuffCodeBlock{lang="js"}
---
code: |
  import { hasWindow } from '@talex-touch/utils/env'
  import { usePowerSDK } from '@talex-touch/utils/plugin/sdk'
  
  /**
   * PowerSDK example
   * - Text：Text/Text
   * - Text：index.js Text power Text（Text 60s）
   */
  
  const power = usePowerSDK()
  
  function applyPowerMode(status) {
    if (status.lowPower) {
      console.warn('[PowerSDK] low power on -> use lightweight mode', status)
      // text：text OCR/text/text
      return
    }
  
    console.warn('[PowerSDK] low power off -> resume normal mode', status)
  }
  
  async function checkPowerOnce(options = { threshold: 25 }) {
    const status = await power.getLowPowerStatus(options)
    applyPowerMode(status)
    return status
  }
  
  function watchPower(options = { threshold: 25 }) {
    const dispose = power.onLowPowerChanged(
      (status) => {
        applyPowerMode(status)
      },
      {
        threshold: options.threshold,
        emitImmediately: true,
      },
    )
  
    return dispose
  }
  
  window.powerSDKExample = {
    checkPowerOnce,
    watchPower,
  }
  
  if (hasWindow() && window.location.hostname === 'localhost') {
    console.warn('[PowerSDK] auto start demo')
    let dispose = () => {}
  
    void checkPowerOnce({ threshold: 25 })
      .then(() => {
        dispose = watchPower({ threshold: 25 })
      })
      .catch((error) => {
        console.error('[PowerSDK] demo failed', error)
      })
  
    // text：30 textexampletext
    setTimeout(() => {
      dispose()
    }, 30_000)
  }
---
:::

### plugin-index-example.js
:::TuffCodeBlock{lang="js"}
---
code: |
  /**
   * Text index.js example
   * Text index.js TextUsage IFeatureLifeCycle Text
   */
  
  // text loadPluginFeatureContextFromContent Loading
  // textexporttext IFeatureLifeCycle text
  
  // export onMessage text - textregistermessage handler
  function onMessage(messageHandler) {
    console.log('Plugin: Registering message handlers')
  
    // registersearchmessage handler
    messageHandler('search', (data) => {
      console.log('Plugin: Handling search message', data)
  
      // Implement search logic
      const results = performSearch(data.query, data.type)
  
      // sendsearchtext
      messageHandler('search:results', { results })
    })
  
    // registertranslatemessage handler
    messageHandler('translate', (data) => {
      console.log('Plugin: Handling translate message', data)
  
      // Implement translation logic
      const translation = performTranslation(data.text, data.from, data.to)
  
      // sendtranslatetext
      messageHandler('translate:result', translation)
    })
  
    // registernotificationmessage handler
    messageHandler('notify', (data) => {
      console.log('Plugin: Handling notify message', data)
  
      // Implement notification logic
      showNotification(data.title, data.body)
    })
  }
  
  // export lifecycle text - textregistertext
  function lifecycle(lifecycleHooks) {
    console.log('Plugin: Registering lifecycle hooks')
  
    // registertext
    lifecycleHooks.onInit(() => {
      console.log('Plugin: Initialized')
      // initialize plugin
      initializePlugin()
    })
  
    // registertext
    lifecycleHooks.onStart(() => {
      console.log('Plugin: Started')
      // start plugin
      startPlugin()
    })
  
    // registertext
    lifecycleHooks.onStop(() => {
      console.log('Plugin: Stopped')
      // stop plugin
      stopPlugin()
    })
  
    // registertext
    lifecycleHooks.onDestroy(() => {
      console.log('Plugin: Destroyed')
      // clean up resources
      cleanupPlugin()
    })
  }
  
  // exporttext IFeatureLifeCycle text
  const featureLifeCycle = {
    onInit() {
      console.log('Plugin: onInit called')
      initializePlugin()
    },
  
    onMessage(key, info) {
      console.log(`Plugin: onMessage called with ${key}`, info)
  
      switch (key) {
        case 'search':
          handleSearchMessage(info)
          break
        case 'translate':
          handleTranslateMessage(info)
          break
        case 'notify':
          handleNotifyMessage(info)
          break
        default:
          console.log('Unknown message:', key)
      }
    },
  
    onLaunch(feature) {
      console.log('Plugin: onLaunch called', feature)
      startPlugin()
    },
  
    onFeatureTriggered(id, data, feature, signal) {
      console.log('Plugin: onFeatureTriggered called', { id, data, feature })
      // handletextTrigger
    },
  
    onInputChanged(input) {
      console.log('Plugin: onInputChanged called', input)
      // handletext
    },
  
    onActionClick(actionId, data) {
      console.log('Plugin: onActionClick called', { actionId, data })
      // handletextClick
    },
  
    onClose(feature) {
      console.log('Plugin: onClose called', feature)
      stopPlugin()
    },
  
    onItemAction(item) {
      console.log('Plugin: onItemAction called', item)
      // handletext
      return Promise.resolve({
        externalAction: false,
        shouldActivate: false,
      })
    },
  }
  
  // text
  function performSearch(query, type) {
    console.log(`Searching for: ${query} (type: ${type})`)
  
    // textsearchtext
    return [
      {
        id: 'search-result-1',
        title: `Search Result for \"${query}\"`,
        description: 'This is a search result',
        action: 'open',
        data: { url: `https://example.com/search?q=${encodeURIComponent(query)}` },
      },
      {
        id: 'search-result-2',
        title: `Another Result for \"${query}\"`,
        description: 'Another search result',
        action: 'copy',
        data: { text: query },
      },
    ]
  }
  
  function performTranslation(text, from, to) {
    console.log(`Translating: \"${text}\" from ${from} to ${to}`)
  
    // texttranslatetext
    return {
      original: text,
      translated: `[${from}→${to}] ${text}`,
      from,
      to,
      confidence: 0.95,
    }
  }
  
  function showNotification(title, body) {
    console.log(`Notification: ${title} - ${body}`)
    // textnotificationDisplaytext
  }
  
  function initializePlugin() {
    console.log('Plugin: Initializing...')
    // initialize plugintext
  }
  
  function startPlugin() {
    console.log('Plugin: Starting...')
    // start plugintext
  }
  
  function stopPlugin() {
    console.log('Plugin: Stopping...')
    // stop plugintext
  }
  
  function cleanupPlugin() {
    console.log('Plugin: Cleaning up...')
    // clean up resourcestext
  }
  
  // Message handlers
  function handleSearchMessage(info) {
    console.log('Handling search message:', info)
    const results = performSearch(info.query, info.type)
    // Use the SDK to send results
  }
  
  function handleTranslateMessage(info) {
    console.log('Handling translate message:', info)
    const translation = performTranslation(info.text, info.from, info.to)
    // Use the SDK to send results
  }
  
  function handleNotifyMessage(info) {
    console.log('Handling notify message:', info)
    showNotification(info.title, info.body)
  }
  
  // exporttext
  module.exports = {
    onMessage,
    lifecycle,
    ...featureLifeCycle,
  }
---
:::

### plugin-receiver-example.js
:::TuffCodeBlock{lang="js"}
---
code: |
  /**
   * Textexample
   * TexthandleTextmessage
   */
  
  // text IFeatureLifeCycle text
  const featureLifeCycle = {
    onInit() {
      console.log('[Plugin Receiver] Plugin initialized')
      // Plugin initializationtext
    },
  
    onMessage(key, info) {
      console.log(`[Plugin Receiver] Received message: ${key}`, info)
  
      switch (key) {
        case 'translate':
          handleTranslateMessage(info)
          break
        case 'search':
          handleSearchMessage(info)
          break
        case 'ping':
          handlePingMessage(info)
          break
        case 'status':
          handleStatusMessage(info)
          break
        case 'process_data':
          handleProcessDataMessage(info)
          break
        case 'get_result':
          handleGetResultMessage(info)
          break
        case 'health_check':
          handleHealthCheckMessage(info)
          break
        default:
          console.log(`[Plugin Receiver] Unknown message type: ${key}`)
      }
    },
  
    onLaunch(feature) {
      console.log('[Plugin Receiver] Plugin launched', feature)
    },
  
    onFeatureTriggered(id, data, feature, signal) {
      console.log('[Plugin Receiver] Feature triggered', { id, data, feature })
    },
  
    onInputChanged(input) {
      console.log('[Plugin Receiver] Input changed:', input)
    },
  
    onActionClick(actionId, data) {
      console.log('[Plugin Receiver] Action clicked:', { actionId, data })
    },
  
    onClose(feature) {
      console.log('[Plugin Receiver] Plugin closed', feature)
    },
  
    onItemAction(item) {
      console.log('[Plugin Receiver] Item action:', item)
      return Promise.resolve({
        externalAction: false,
        shouldActivate: false,
      })
    },
  }
  
  // Message handlers
  function handleTranslateMessage(info) {
    console.log('[Translate] Processing translation request:', info)
  
    // texttranslatehandle
    const translation = {
      original: info.text,
      translated: `Translated: ${info.text}`,
      from: info.from,
      to: info.to,
      timestamp: Date.now(),
    }
  
    console.log('[Translate] Translation result:', translation)
    return translation
  }
  
  function handleSearchMessage(info) {
    console.log('[Search] Processing search request:', info)
  
    // textsearchhandle
    const results = [
      {
        id: 'result-1',
        title: 'Search Result 1',
        description: 'This is a search result',
        score: 0.95,
      },
      {
        id: 'result-2',
        title: 'Search Result 2',
        description: 'Another search result',
        score: 0.87,
      },
    ]
  
    console.log('[Search] Search results:', results)
    return results
  }
  
  function handlePingMessage(info) {
    console.log('[Ping] Received ping:', info)
  
    // returnpongtext
    const pong = {
      message: 'pong',
      timestamp: Date.now(),
      source: 'plugin-receiver',
      originalTimestamp: info.timestamp,
    }
  
    console.log('[Ping] Sending pong:', pong)
    return pong
  }
  
  function handleStatusMessage(info) {
    console.log('[Status] Status query:', info)
  
    // returntext
    const status = {
      status: 'active',
      version: '1.0.0',
      uptime: Date.now(),
      features: ['translate', 'search', 'ping'],
      memory: {
        used: Math.random() * 100,
        total: 100,
      },
    }
  
    console.log('[Status] Plugin status:', status)
    return status
  }
  
  function handleProcessDataMessage(info) {
    console.log('[Process Data] Processing data:', info)
  
    // texthandle
    const processedData = {
      original: info.data,
      processed: {
        ...info.data,
        processedAt: Date.now(),
        processedBy: 'plugin-receiver',
      },
      metadata: {
        ...info.data.metadata,
        processingTime: Math.random() * 100,
      },
    }
  
    console.log('[Process Data] Processed data:', processedData)
    return processedData
  }
  
  function handleGetResultMessage(info) {
    console.log('[Get Result] Result request:', info)
  
    // returnhandletext
    const result = {
      requestId: info.requestId,
      status: 'completed',
      result: {
        message: 'Data processed successfully',
        timestamp: Date.now(),
      },
    }
  
    console.log('[Get Result] Returning result:', result)
    return result
  }
  
  function handleHealthCheckMessage(info) {
    console.log('[Health Check] Health check request:', info)
  
    // returntext
    const health = {
      status: 'healthy',
      timestamp: Date.now(),
      checks: {
        memory: 'ok',
        cpu: 'ok',
        network: 'ok',
      },
    }
  
    console.log('[Health Check] Health status:', health)
    return health
  }
  
  // exporttext
  module.exports = featureLifeCycle
---
:::

## Plugin communication / Channel

### communicate-example.js
:::TuffCodeBlock{lang="js"}
---
code: |
  /**
   * Textexample
   * TextUsage communicateWithPlugin Text
   */
  
  import { useTouchSDK } from '@talex-touch/utils/plugin/sdk'
  
  // Get SDK instance
  const sdk = useTouchSDK()
  
  // sendmessagetextexample
  async function communicateWithPlugin() {
    try {
      // Usagetext communicateWithPlugin text
      const result = await sdk.communicateWithPlugin(
        'touch-translation', // text
        'translate', // message key
        { // message payload
          text: 'Hello World',
          from: 'en',
          to: 'zh',
        },
      )
  
      console.log('Communication result:', result)
    }
    catch (error) {
      console.error('Failed to communicate with plugin:', error)
    }
  }
  
  // sendsearchmessagetext
  async function sendSearchToPlugin() {
    try {
      const result = await sdk.communicateWithPlugin(
        'touch-translation',
        'search',
        {
          query: 'translation',
          type: 'text',
        },
      )
  
      console.log('Search result:', result)
    }
    catch (error) {
      console.error('Failed to send search to plugin:', error)
    }
  }
  
  // Send notificationmessagetext
  async function sendNotificationToPlugin() {
    try {
      const result = await sdk.communicateWithPlugin(
        'touch-translation',
        'notify',
        {
          title: 'Plugin Communication',
          body: 'This is a test notification',
        },
      )
  
      console.log('Notification result:', result)
    }
    catch (error) {
      console.error('Failed to send notification to plugin:', error)
    }
  }
  
  // textsendmessagetext
  async function sendToMultiplePlugins() {
    const plugins = ['touch-translation', 'touch-music', 'touch-image']
    const key = 'ping'
    const info = { timestamp: Date.now() }
  
    const promises = plugins.map(async (pluginName) => {
      try {
        return await sdk.communicateWithPlugin(pluginName, key, info)
      }
      catch (error) {
        console.error(`Failed to send to ${pluginName}:`, error)
        return null
      }
    })
  
    const results = await Promise.allSettled(promises)
    console.log('Batch communication results:', results)
  }
  
  // Export functions for external usage
  window.communicateExample = {
    communicateWithPlugin,
    sendSearchToPlugin,
    sendNotificationToPlugin,
    sendToMultiplePlugins,
  }
---
:::

### complete-communication-example.js
:::TuffCodeBlock{lang="js"}
---
code: |
  import { hasWindow } from '@talex-touch/utils/env'
  import { useTouchSDK } from '@talex-touch/utils/plugin/sdk'
  
  /**
   * Textexample
   * Text
   */
  
  // Get SDK instance
  const sdk = useTouchSDK()
  
  // 1. textAsendmessagetextB
  async function pluginAtoPluginB() {
    try {
      console.log('[Plugin A] Sending message to Plugin B')
  
      const result = await sdk.communicateWithPlugin(
        'touch-translation', // text
        'translate', // message key
        { // message payload
          text: 'Hello from Plugin A',
          from: 'en',
          to: 'zh',
        },
      )
  
      console.log('[Plugin A] Received response:', result)
      return result
    }
    catch (error) {
      console.error('[Plugin A] Communication failed:', error)
      throw error
    }
  }
  
  // 2. textexample
  async function batchCommunication() {
    const plugins = [
      { name: 'touch-translation', key: 'translate', info: { text: 'Hello', from: 'en', to: 'zh' } },
      { name: 'touch-music', key: 'play', info: { song: 'Test Song', artist: 'Test Artist' } },
      { name: 'touch-image', key: 'process', info: { imageUrl: 'https://example.com/image.jpg' } },
    ]
  
    console.log('[Batch] Starting batch communication...')
  
    const results = await Promise.allSettled(
      plugins.map(async (plugin) => {
        try {
          return await sdk.communicateWithPlugin(plugin.name, plugin.key, plugin.info)
        }
        catch (error) {
          console.error(`[Batch] Failed to communicate with ${plugin.name}:`, error)
          return { error: error.message }
        }
      }),
    )
  
    console.log('[Batch] Batch communication results:', results)
    return results
  }
  
  // 3. texthandleexample
  async function errorHandlingExample() {
    try {
      // text
      await sdk.communicateWithPlugin('non-existent-plugin', 'test', {})
    }
    catch (error) {
      console.log('[Error Handling] Expected error:', error.message)
    }
  
    try {
      // textParams
      await sdk.communicateWithPlugin('touch-translation', '', {})
    }
    catch (error) {
      console.log('[Error Handling] Expected error:', error.message)
    }
  }
  
  // 4. textexample
  async function realTimeCommunication() {
    console.log('[Real-time] Starting real-time communication...')
  
    // sendpingmessage
    const pingResult = await sdk.communicateWithPlugin('touch-translation', 'ping', {
      timestamp: Date.now(),
      source: 'plugin-a',
    })
  
    console.log('[Real-time] Ping result:', pingResult)
  
    // sendtext
    const statusResult = await sdk.communicateWithPlugin('touch-translation', 'status', {
      query: 'plugin_status',
    })
  
    console.log('[Real-time] Status result:', statusResult)
  }
  
  // 5. textexample
  async function dataExchange() {
    console.log('[Data Exchange] Starting data exchange...')
  
    // sendtexthandle
    const processResult = await sdk.communicateWithPlugin('touch-translation', 'process_data', {
      data: {
        text: 'This is a test message',
        metadata: {
          source: 'plugin-a',
          timestamp: Date.now(),
          version: '1.0.0',
        },
      },
    })
  
    console.log('[Data Exchange] Process result:', processResult)
  
    // textreturnhandletext
    const result = await sdk.communicateWithPlugin('touch-translation', 'get_result', {
      requestId: 'test-request-123',
    })
  
    console.log('[Data Exchange] Result:', result)
  }
  
  // 6. text
  async function pluginStatusMonitoring() {
    const plugins = ['touch-translation', 'touch-music', 'touch-image']
  
    console.log('[Monitoring] Checking plugin status...')
  
    for (const pluginName of plugins) {
      try {
        const status = await sdk.communicateWithPlugin(pluginName, 'health_check', {
          timestamp: Date.now(),
        })
        console.log(`[Monitoring] ${pluginName} status:`, status)
      }
      catch (error) {
        console.log(`[Monitoring] ${pluginName} is not responding:`, error.message)
      }
    }
  }
  
  // exporttext
  window.completeCommunicationExample = {
    pluginAtoPluginB,
    batchCommunication,
    errorHandlingExample,
    realTimeCommunication,
    dataExchange,
    pluginStatusMonitoring,
  }
  
  // textexample（text）
  if (hasWindow() && window.location.hostname === 'localhost') {
    console.log('[Auto] Running communication examples...')
  
    // text，textSDKtext
    setTimeout(async () => {
      try {
        await pluginAtoPluginB()
        await batchCommunication()
        await errorHandlingExample()
        await realTimeCommunication()
        await dataExchange()
        await pluginStatusMonitoring()
      }
      catch (error) {
        console.error('[Auto] Example execution failed:', error)
      }
    }, 1000)
  }
---
:::

## Messaging & notifications

### message-system-example.js
:::TuffCodeBlock{lang="js"}
---
code: |
  /**
   * messageTextexample
   * Shows how to send messages with the SDK
   */
  
  import { useTouchSDK } from '@talex-touch/utils/plugin/sdk'
  
  // Get SDK instance
  const sdk = useTouchSDK()
  
  // sendmessageexample
  async function sendMessageExamples() {
    try {
      // sendsearchmessage
      await sdk.sendMessage('search', {
        query: 'hello world',
        type: 'text',
      })
  
      // sendtranslatemessage
      await sdk.sendMessage('translate', {
        text: 'Hello',
        from: 'en',
        to: 'zh',
      })
  
      // Send notificationmessage
      await sdk.sendMessage('notify', {
        title: 'Plugin Message',
        body: 'This is a notification from plugin',
      })
    }
    catch (error) {
      console.error('Failed to send messages:', error)
    }
  }
  
  // exporttext
  window.messageSystemExample = {
    sendMessageExamples,
  }
---
:::

### notification-example.js
:::TuffCodeBlock{lang="js"}
---
code: |
  /**
   * Notification featureexample
   * TextUsageNotification feature
   */
  
  import { useTouchSDK } from '@talex-touch/utils/plugin/sdk'
  
  const sdk = useTouchSDK()
  
  // notificationtextexample
  async function notificationExamples() {
    try {
      // Displaytextnotification
      await sdk.sendMessage('notification:show', {
        title: 'Hello World',
        body: 'This is a simple notification',
        options: {
          icon: 'info',
          timeout: 3000,
        },
      })
  
      // Displaytextnotification
      await sdk.sendMessage('notification:show', {
        title: 'Plugin Update',
        body: 'New version is available',
        options: {
          icon: 'update',
          actions: [
            { id: 'update', label: 'Update Now' },
            { id: 'later', label: 'Later' },
          ],
        },
      })
  
      // Displaytextnotification
      await sdk.sendMessage('notification:show', {
        title: 'Downloading',
        body: 'Downloading file...',
        options: {
          icon: 'download',
          progress: 0,
        },
      })
  
      // text
      for (let i = 0; i <= 100; i += 10) {
        await sdk.sendMessage('notification:update', {
          id: 'download-notification',
          title: 'Downloading',
          body: `Progress: ${i}%`,
          options: {
            progress: i,
          },
        })
        await new Promise(resolve => setTimeout(resolve, 200))
      }
  
      // Hiddennotification
      await sdk.sendMessage('notification:hide', {
        id: 'download-notification',
      })
    }
    catch (error) {
      console.error('Notification operations failed:', error)
    }
  }
  
  // Handlers
  function handleNotificationShow(data) {
    console.log('Showing notification:', data.title, data.body)
    // textDisplaytext
  }
  
  function handleNotificationHide(data) {
    console.log('Hiding notification:', data.id)
    // textHiddentext
  }
  
  function handleNotificationUpdate(data) {
    console.log('Updating notification:', data.id, data.title, data.body)
    // text
  }
---
:::

## DivisionBox
- `examples/division-box/README.md`
- `examples/division-box/basic-usage.ts`
- `examples/division-box/keepalive-mode.ts`
- `examples/division-box/custom-header.ts`
- `examples/division-box/flow-integration.ts`
- `examples/division-box/flow-usage-example.ts`
- `examples/division-box/manifest-example.json`

## Utils & packages
- `examples/util-pkg/tuff-help`
- `examples/util-pkg/tuff-test`
- `examples/util-pkg/tuff-utils`
