---
title: Tuff CLI
description: Command-line tools for building and publishing Tuff plugins
---

# Tuff CLI

The `@talex-touch/unplugin-export-plugin` package provides a CLI tool called `tuff` for building and publishing Tuff plugins.

## Installation

:::TuffCodeBlock{lang="bash"}
---
code: |
  # Global installation
  pnpm add -g @talex-touch/unplugin-export-plugin
  
  # Or use via npx
  npx tuff <command>
---
:::

## Commands

**`tuff create [name]`**

Create a new plugin via interactive prompts (type, language, UI framework, template).

**`tuff build`**

Run Vite build and then package `.tpex` output.

:::TuffCodeBlock{lang="bash"}
---
code: |
  tuff build --watch --dev --output dist
---
:::

**Options:**
- `--watch` - Watch files and repackage after build
- `--dev` - Development mode (no minify, sourcemap enabled)
- `--output <dir>` - Output directory (default: `dist`)

**`tuff builder`**

Package existing build output into `.tpex` (no Vite build).

:::TuffCodeBlock{lang="bash"}
---
code: |
  tuff builder
---
:::

**`tuff dev`**

Start the Vite dev server for plugin development.

:::TuffCodeBlock{lang="bash"}
---
code: |
  tuff dev --host --port 5173 --open
---
:::

**Options:**
- `--host [host]` - Bind host (omit value to listen on all)
- `--port <port>` - Dev server port
- `--open` - Open browser on start

**`tuff publish`**

Publish the latest `.tpex` package to Tuff Nexus.

:::TuffCodeBlock{lang="bash"}
---
code: |
  tuff publish --tag 1.0.0 --channel RELEASE
---
:::

**Options:**
- `--tag` - Version tag (default: package.json version)
- `--channel` - `RELEASE`, `BETA`, or `SNAPSHOT`
- `--notes` - Changelog/notes (Markdown)
- `--dry-run` - Preview without publishing
- `--api-url` - Custom publish API URL

**`tuff login`**

Save your authentication token for publishing.

:::TuffCodeBlock{lang="bash"}
---
code: |
  tuff login <token>
---
:::

The token is stored in `~/.tuff/auth.json`.

**`tuff logout`**

Remove saved authentication credentials.

:::TuffCodeBlock{lang="bash"}
---
code: |
  tuff logout
---
:::

**`tuff help`** / **`tuff about`**

Show help or tool information.

**`tuff`**

Run without arguments to enter interactive mode.

## Vite Plugin Integration

You can also use the unplugin as a Vite plugin for automatic plugin building:

:::TuffCodeBlock{lang="typescript"}
---
code: |
  // vite.config.ts
  import { defineConfig } from 'vite'
  import TuffExport from '@talex-touch/unplugin-export-plugin/vite'
  
  export default defineConfig({
    plugins: [
      TuffExport({
        // Plugin options
      })
    ]
  })
---
:::

## Configuration

Optional `tuff.config.{ts,js,mjs,cjs}` can define defaults for build/dev/publish.
Precedence: CLI flags > tuff.config > manifest > defaults.

## Publishing Workflow

1. **Build your plugin:**
   :::TuffCodeBlock{lang="bash"}
   ---
   code: |
     tuff build
   ---
   :::
   (or `vite build && tuff builder`)

2. **Login to Nexus:**
   :::TuffCodeBlock{lang="bash"}
   ---
   code: |
     tuff login YOUR_API_TOKEN
   ---
   :::

3. **Publish:**
   :::TuffCodeBlock{lang="bash"}
   ---
   code: |
     tuff publish --tag 1.0.0 --channel RELEASE
   ---
   :::

The CLI will:
- Scan `dist/build` (and `dist`) for `.tpex` packages
- Validate manifest/package versions
- Upload the latest `.tpex` to the publish API
