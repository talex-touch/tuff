---
title: "TextTransformer 文本变换"
description: "用于在文本变化时提供平滑的过渡效果（fade + blur），适合与 `TxAutoSizer` 搭配实现“内容变化 + 尺寸跟随”的丝滑体验。"
category: Basic
syncStatus: migrated
---
# TextTransformer 文本变换

用于在文本变化时提供平滑的过渡效果（fade + blur），适合与 `TxAutoSizer` 搭配实现“内容变化 + 尺寸跟随”的丝滑体验。

> 不建议用于高频实时更新（例如逐字流式刷新、每帧变化的状态）。更适合“偶发状态切换 / 标题切换 / 章节切换 / 短句变化”等场景。

<script setup lang="ts">
import TextTransformerBasicDemo from '~/components/content/demos/TextTransformerBasicDemo.vue'
import TextTransformerBasicDemoSource from '~/components/content/demos/TextTransformerBasicDemo.vue?raw'

import AutoSizerTextTransformerDemo from '~/components/content/demos/AutoSizerTextTransformerDemo.vue'
import AutoSizerTextTransformerDemoSource from '~/components/content/demos/AutoSizerTextTransformerDemo.vue?raw'

import TextTransformerLongTextDemo from '~/components/content/demos/TextTransformerLongTextDemo.vue'
import TextTransformerLongTextDemoSource from '~/components/content/demos/TextTransformerLongTextDemo.vue?raw'

import TextTransformerTitleSubtitleDemo from '~/components/content/demos/TextTransformerTitleSubtitleDemo.vue'
import TextTransformerTitleSubtitleDemoSource from '~/components/content/demos/TextTransformerTitleSubtitleDemo.vue?raw'

import TextTransformerBadgeDemo from '~/components/content/demos/TextTransformerBadgeDemo.vue'
import TextTransformerBadgeDemoSource from '~/components/content/demos/TextTransformerBadgeDemo.vue?raw'
</script>

## 基础用法

### TextTransformer
:::TuffDemoWrapper{demo="TextTransformerTextTransformerDemo" code-lang="vue"}
---
code: |
  <script setup lang="ts">
  import { ref } from 'vue'

  const text = ref('Hello')
  const duration = ref(320)
  const blurPx = ref(10)
  const accent = ref(false)
  const sizerRef = ref<any>(null)

  function toggle() {
    void sizerRef.value?.action?.(() => {
      text.value = text.value === 'Hello'
        ? 'Goodbye (blur + fade) - a longer title that will be clipped while resizing'
        : 'Hello'
      accent.value = !accent.value
    })
  }
  </script>

  <template>
    <div style="display: flex; flex-direction: column; gap: 12px;">
      <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
        <TxButton @click="toggle">
          Toggle
        </TxButton>

        <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
          <div style="width: 220px;">
            <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
              duration (ms)
            </div>
            <TxSlider v-model="duration" :min="120" :max="720" :step="10" :show-value="true" />
          </div>

          <div style="width: 220px;">
            <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
              blur (px)
            </div>
            <TxSlider v-model="blurPx" :min="0" :max="24" :step="1" :show-value="true" />
          </div>
        </div>
      </div>

      <TxAutoSizer
        ref="sizerRef"
        :width="true"
        :height="true"
        :inline="true"
        :duration-ms="duration"
        easing="cubic-bezier(0.2, 0, 0, 1)"
        outer-class="overflow-hidden"
      >
        <TxCard variant="plain" background="mask" :padding="12" :radius="14">
          <div style="font-size: 14px; font-weight: 600; line-height: 1.4;">
            <TxTextTransformer
              :text="text"
              :duration-ms="duration"
              :blur-px="blurPx"
              :style="{ color: accent ? 'var(--tx-color-primary)' : 'var(--tx-text-color-primary)' }"
            />
          </div>
          <div style="font-size: 12px; opacity: 0.75; margin-top: 6px;">
            text: {{ text }}
          </div>
        </TxCard>
      </TxAutoSizer>
    </div>
  </template>
---
:::

## 与 AutoSizer 搭配

当你希望文本变化时 **宽度/高度也平滑跟随**，建议把 `TxTextTransformer` 放进 `TxAutoSizer` 内，并通过 `autoSizerRef.action(() => ...)` 来触发一次事务切换。

如果你在尺寸动画过程中不希望文本被挤压换行（出现竖排/跳行），可以保持默认 `wrap=false`，超出部分会被裁剪（`overflow: hidden`）。

### AutoSizer + TextTransformer
:::TuffDemoWrapper{demo="TextTransformerAutoSizerTextTransformerDemo" code-lang="vue"}
---
code: |
  <script setup lang="ts">
  import { ref } from 'vue'

  const sizerRef = ref<any>(null)
  const label = ref('Short')
  const accent = ref(false)
  const duration = ref(360)
  const blurPx = ref(10)

  function toggle() {
    void sizerRef.value?.action?.(() => {
      label.value = label.value === 'Short'
        ? 'Very very long label (blur + fade) that will be clipped while resizing'
        : 'Short'
      accent.value = !accent.value
    })
  }
  </script>

  <template>
    <div style="display: flex; flex-direction: column; gap: 12px;">
      <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
        <TxButton @click="toggle">
          Toggle
        </TxButton>

        <div style="width: 220px;">
          <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
            duration (ms)
          </div>
          <TxSlider v-model="duration" :min="160" :max="720" :step="10" :show-value="true" />
        </div>

        <div style="width: 220px;">
          <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
            blur (px)
          </div>
          <TxSlider v-model="blurPx" :min="0" :max="24" :step="1" :show-value="true" />
        </div>
      </div>

      <TxAutoSizer
        ref="sizerRef"
        :width="true"
        :height="true"
        :inline="true"
        :duration-ms="duration"
        easing="cubic-bezier(0.2, 0, 0, 1)"
        outer-class="overflow-hidden"
      >
        <TxCard variant="plain" background="mask" :padding="12" :radius="14" style="max-width: 360px;">
          <div style="font-size: 13px; line-height: 1.4;">
            <TxTextTransformer
              :text="label"
              :duration-ms="duration"
              :blur-px="blurPx"
              :style="{ color: accent ? 'var(--tx-color-primary)' : 'var(--tx-text-color-primary)' }"
            />
          </div>
        </TxCard>
      </TxAutoSizer>
    </div>
  </template>
---
:::

## 长文本/章节切换

### Long text chapter
:::TuffDemoWrapper{demo="TextTransformerLongTextChapterDemo" code-lang="vue"}
---
code: |
  <script setup lang="ts">
  import { ref } from 'vue'

  const sizerRef = ref<any>(null)
  const long = ref(false)
  const duration = ref(380)
  const blurPx = ref(12)

  const chapterA = `Chapter A\n\nThis is a longer paragraph of text used to simulate chapter content changes.\nIt includes multiple lines so you can observe both width and height transitions.\n\n- Bullet A\n- Bullet B\n- Bullet C\n\nEnd.`

  const chapterB = `Chapter B\n\nA different chapter with different length.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit.\nSed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n\nUt enim ad minim veniam, quis nostrud exercitation ullamco laboris.\n\nEnd.`

  const text = ref(chapterA)

  function toggle() {
    void sizerRef.value?.action?.(() => {
      long.value = !long.value
      text.value = long.value ? chapterB : chapterA
    })
  }
  </script>

  <template>
    <div style="display: flex; flex-direction: column; gap: 12px;">
      <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
        <TxButton @click="toggle">
          Toggle chapter
        </TxButton>

        <div style="width: 220px;">
          <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
            duration (ms)
          </div>
          <TxSlider v-model="duration" :min="180" :max="900" :step="10" :show-value="true" />
        </div>

        <div style="width: 220px;">
          <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
            blur (px)
          </div>
          <TxSlider v-model="blurPx" :min="0" :max="28" :step="1" :show-value="true" />
        </div>
      </div>

      <TxAutoSizer
        ref="sizerRef"
        :width="true"
        :height="true"
        :duration-ms="duration"
        easing="cubic-bezier(0.2, 0, 0, 1)"
        outer-class="overflow-hidden"
        style="max-width: 720px;"
      >
        <TxCard variant="plain" background="mask" :padding="14" :radius="14">
          <div style="font-size: 13px; line-height: 1.6; max-width: 640px;">
            <TxTextTransformer :text="text" :duration-ms="duration" :blur-px="blurPx" wrap />
          </div>
        </TxCard>
      </TxAutoSizer>

      <div style="font-size: 12px; opacity: 0.65;">
        Tip: this component is designed for occasional transitions. Avoid using it for high-frequency real-time updates.
      </div>
    </div>
  </template>
---
:::

## 标题 + 副标题

### Title + subtitle
:::TuffDemoWrapper{demo="TextTransformerTitleSubtitleDemo" code-lang="vue"}
---
code: |
  <script setup lang="ts">
  import { ref } from 'vue'

  const sizerRef = ref<any>(null)
  const duration = ref(320)
  const blurPx = ref(10)
  const accent = ref(false)

  const title = ref('Daily Report')
  const subtitle = ref('Short summary.')

  function toggle() {
    void sizerRef.value?.action?.(() => {
      if (title.value === 'Daily Report') {
        title.value = 'Weekly Report (Longer Title)'
        subtitle.value = 'A longer subtitle that spans multiple words.'
      }
      else {
        title.value = 'Daily Report'
        subtitle.value = 'Short summary.'
      }
      accent.value = !accent.value
    })
  }
  </script>

  <template>
    <div style="display: flex; flex-direction: column; gap: 12px;">
      <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
        <TxButton @click="toggle">
          Toggle
        </TxButton>
        <div style="width: 220px;">
          <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
            duration (ms)
          </div>
          <TxSlider v-model="duration" :min="160" :max="720" :step="10" :show-value="true" />
        </div>
        <div style="width: 220px;">
          <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
            blur (px)
          </div>
          <TxSlider v-model="blurPx" :min="0" :max="24" :step="1" :show-value="true" />
        </div>
      </div>

      <TxAutoSizer
        ref="sizerRef"
        :width="true"
        :height="true"
        :inline="true"
        :duration-ms="duration"
        easing="cubic-bezier(0.2, 0, 0, 1)"
        outer-class="overflow-hidden"
      >
        <TxCard variant="plain" background="mask" :padding="14" :radius="14" style="max-width: 420px;">
          <div style="display: flex; flex-direction: column; gap: 6px;">
            <div style="font-size: 14px; font-weight: 700; line-height: 1.3;">
              <TxTextTransformer
                :text="title"
                :duration-ms="duration"
                :blur-px="blurPx"
                :style="{ color: accent ? 'var(--tx-color-primary)' : 'var(--tx-text-color-primary)' }"
              />
            </div>
            <div style="font-size: 12px; opacity: 0.8; line-height: 1.4;">
              <TxTextTransformer
                :text="subtitle"
                :duration-ms="duration"
                :blur-px="blurPx"
                :style="{ color: accent ? 'var(--tx-color-primary)' : 'var(--tx-text-color-secondary)' }"
              />
            </div>
          </div>
        </TxCard>
      </TxAutoSizer>
    </div>
  </template>
---
:::

## 状态/徽标文本

### Status text
:::TuffDemoWrapper{demo="TextTransformerStatusTextDemo" code-lang="vue"}
---
code: |
  <script setup lang="ts">
  import { ref } from 'vue'

  const sizerRef = ref<any>(null)
  const duration = ref(280)
  const blurPx = ref(10)

  const mode = ref<'ok' | 'warn' | 'err'>('ok')

  function label() {
    if (mode.value === 'ok')
      return 'Synced'
    if (mode.value === 'warn')
      return 'Syncing (may take a while)'
    return 'Failed: Network error'
  }

  function color() {
    if (mode.value === 'ok')
      return 'var(--tx-color-success)'
    if (mode.value === 'warn')
      return 'var(--tx-color-warning)'
    return 'var(--tx-color-danger)'
  }

  function toggle() {
    void sizerRef.value?.action?.(() => {
      mode.value = mode.value === 'ok' ? 'warn' : mode.value === 'warn' ? 'err' : 'ok'
    })
  }
  </script>

  <template>
    <div style="display: flex; flex-direction: column; gap: 12px;">
      <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
        <TxButton @click="toggle">
          Toggle
        </TxButton>
        <div style="width: 220px;">
          <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
            duration (ms)
          </div>
          <TxSlider v-model="duration" :min="120" :max="600" :step="10" :show-value="true" />
        </div>
        <div style="width: 220px;">
          <div style="font-size: 12px; opacity: 0.72; margin-bottom: 6px;">
            blur (px)
          </div>
          <TxSlider v-model="blurPx" :min="0" :max="24" :step="1" :show-value="true" />
        </div>
      </div>

      <TxAutoSizer
        ref="sizerRef"
        :width="true"
        :height="true"
        :inline="true"
        :duration-ms="duration"
        easing="cubic-bezier(0.2, 0, 0, 1)"
        outer-class="overflow-hidden"
      >
        <TxCard variant="plain" background="mask" :padding="12" :radius="14">
          <div style="display: inline-flex; align-items: center; gap: 10px;">
            <div
              style="width: 8px; height: 8px; border-radius: 99px;"
              :style="{ background: color() }"
            />
            <TxTextTransformer
              :text="label()"
              :duration-ms="duration"
              :blur-px="blurPx"
              :style="{ color: color() }"
            />
          </div>
        </TxCard>
      </TxAutoSizer>
    </div>
  </template>
---
:::

## API

### TxTextTransformer

#### Props

| 属性名 | 类型 | 默认值 | 说明 |
|------|------|---------|------|
| `text` | `string \| number` | - | 显示内容 |
| `durationMs` | `number` | `240` | 过渡时长(ms) |
| `blurPx` | `number` | `8` | blur 强度(px) |
| `tag` | `string` | `span` | 外层渲染标签 |
| `wrap` | `boolean` | `false` | 是否允许换行（长文本/包含 `\n` 的场景建议开启） |
