---
mode: plan
cwd: /Users/talexdreamsoul/Workspace/Projects/talex-touch/apps/core-app
task: é‡æ–°æ¢³ç†è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆå¹¶å½¢æˆå¯æ‰§è¡Œè®¡åˆ’
complexity: medium
planning_method: builtin
created_at: 2026-01-21T13:31:11+08:00
---

# Plan: è‡ªåŠ¨æ›´æ–°æ–¹æ¡ˆæ¢³ç†ä¸è½åœ°

ğŸ¯ ä»»åŠ¡æ¦‚è¿°
ç›®æ ‡æ˜¯æ¢³ç†ç°æœ‰è‡ªåŠ¨æ›´æ–°å®ç°ä¸å‘å¸ƒé…ç½®çš„åå·®ï¼Œæ˜ç¡®ç»Ÿä¸€çš„æ›´æ–°æ¥æºã€ä¸‹è½½/å®‰è£…é“¾è·¯ä¸éªŒè¯ç­–ç•¥ï¼Œ
å¹¶å½¢æˆå¯æ‰§è¡Œçš„è½åœ°æ­¥éª¤ä¸å›å½’æ¸…å•ï¼Œç¡®ä¿å¤šå¹³å°æ›´æ–°æµç¨‹ç¨³å®šå¯è¿½è¸ªã€‚

ğŸ“‹ æ‰§è¡Œè®¡åˆ’
1. ç°çŠ¶ç›˜ç‚¹ï¼šæ•´ç†ä¸»è¿›ç¨‹æ›´æ–°æ¨¡å—ã€å‰ç«¯è®¾ç½®é¡µã€ä¸‹è½½ä¸­å¿ƒä¸å‘å¸ƒé…ç½®çš„ç°çŠ¶ä¸å·®å¼‚ç‚¹ï¼Œè¾“å‡ºæ¸…å•ã€‚
2. æ›´æ–°æºç­–ç•¥ï¼šç¡®è®¤æ›´æ–°æ¥æºï¼ˆGitHub Releases vs è‡ªå»º publishï¼‰ä¸æ¸ é“ç­–ç•¥ï¼Œå½¢æˆå•ä¸€é…ç½®å£å¾„ã€‚
3. èµ„äº§è§„èŒƒï¼šå®šä¹‰å¹³å°/æ¶æ„/ç­¾å/æ ¡éªŒæ–‡ä»¶å‘½åä¸å¿…å¤‡äº§ç‰©æ¸…å•ï¼Œå¯¹é½ä¸‹è½½ä¸æ ¡éªŒé€»è¾‘ã€‚
4. æµç¨‹æ”¶æ•›ï¼šç»Ÿä¸€æ›´æ–°æ£€æŸ¥ â†’ ä¸‹è½½ â†’ å®‰è£…è§¦å‘è·¯å¾„ï¼Œæ˜ç¡®æ˜¯å¦ä»…èµ°ä¸»è¿›ç¨‹ UpdateSystemã€‚
5. äº¤äº’ä¸é€šçŸ¥ï¼šæ¢³ç† UI å±•ç¤ºã€æé†’ç­–ç•¥ã€å¿½ç•¥/ç¨åé€»è¾‘ä¸ä¸‹è½½å®Œæˆæç¤ºï¼Œç¡®ä¿ä¸€è‡´æ€§ã€‚
6. ç¼“å­˜ä¸é¢‘ç‡ï¼šç¡®è®¤ç¼“å­˜ TTLã€é¢‘æ§ç­–ç•¥ã€é‡è¯•ä¸é”™è¯¯åˆ†ç±»æç¤ºï¼Œé¿å…é¢‘ç¹è¯·æ±‚ä¸è¯¯æŠ¥ã€‚
7. éªŒè¯ä¸å›å½’ï¼šåˆ¶å®šè·¨å¹³å°å›å½’æ¸…å•ï¼ˆæ¸ é“åˆ‡æ¢ã€æ–­ç½‘ã€é™é¢‘ã€ç­¾åå¤±è´¥ï¼‰ï¼Œè¡¥å¿…è¦å•æµ‹/æ‰‹æµ‹æ­¥éª¤ã€‚
8. äº¤ä»˜ç‰©æ•´ç†ï¼šè¾“å‡ºæœ€ç»ˆæ–¹æ¡ˆæ–‡æ¡£ä¸é…ç½®è°ƒæ•´æ¸…å•ï¼Œæ ‡æ³¨ä¾èµ–ä¸ä¸Šçº¿å‰æ£€æŸ¥é¡¹ã€‚

## ç°çŠ¶ç›˜ç‚¹ä¸å·®å¼‚æ¸…å•
- UpdateServiceï¼ˆ`src/main/modules/update/UpdateService.ts`ï¼‰ï¼šä¸»è¿›ç¨‹æ›´æ–°ç¼–æ’ä¸è®¾ç½®/ç¼“å­˜ä¸­å¿ƒï¼›ç›´æ¥è®¿é—® GitHub Releases APIï¼ˆå« ETag/TTL/é™é¢‘/é‡è¯•ç­–ç•¥ï¼‰ï¼ŒæŒä¹…åŒ– UpdateRepository ä¸ release cacheï¼›å†…éƒ¨å®ä¾‹åŒ– UpdateSystem æ‰¿æ‹…ä¸‹è½½/å®‰è£…ï¼Œå¹¶é€šè¿‡ UpdateEvents ä¸æ¸²æŸ“è¿›ç¨‹äº¤äº’ã€‚
- UpdateSystemï¼ˆ`src/main/modules/update/update-system.ts`ï¼‰ï¼šç‹¬ç«‹æ›´æ–°æ£€æŸ¥/ä¸‹è½½/å®‰è£…å®ç°ï¼Œå†…ç½® GitHub Releases æ‹‰å–ä¸å¹³å°èµ„äº§åŒ¹é…ï¼›é…ç½®å£å¾„ä¸º `autoDownload/autoCheck/checkFrequency/updateChannel`ï¼Œæœªè¯»å– UpdateService çš„ source/ç¼“å­˜ï¼›é€šè¿‡ DownloadCenter å‘èµ·é«˜ä¼˜å…ˆçº§ä¸‹è½½å¹¶è§¦å‘é€šçŸ¥ã€‚
- SettingUpdateï¼ˆ`src/renderer/src/views/base/settings/SettingUpdate.vue`ï¼‰ï¼šå‰ç«¯è®¾ç½®å…¥å£ï¼›é¢‘ç‡é€‰é¡¹ä¸º `everyday/1day/3day/7day/1month/never`ï¼Œä¸ UpdateSystem `startup/daily/weekly/never` å£å¾„ä¸ä¸€è‡´ï¼›ä½¿ç”¨ `GithubUpdateProvider` å±•ç¤ºèµ„äº§åˆ—è¡¨ï¼Œå¹¶å…è®¸é€šè¿‡ `useDownloadCenter` ç›´æ¥å‘èµ·ä¸‹è½½ä»»åŠ¡ã€‚
- DownloadCenterï¼ˆ`src/main/modules/download/download-center.ts`ï¼‰ï¼šé€šç”¨ä¸‹è½½æ¨¡å—ï¼Œæ›´æ–°ä¸‹è½½ä¾èµ– `DownloadModule.APP_UPDATE` ä¸é€šçŸ¥æœåŠ¡ï¼›æ—¢è¢« UpdateSystem è°ƒç”¨ï¼Œä¹Ÿè¢« SettingUpdate ç›´è¿æ·»åŠ ä¸‹è½½ä»»åŠ¡ï¼Œå­˜åœ¨å¤šå…¥å£è§¦å‘çš„ç°å®è·¯å¾„ã€‚
- å‘å¸ƒé…ç½®ï¼ˆ`electron-builder.yml`ã€`dev-app-update.yml`ï¼‰ï¼š`publish` ä½¿ç”¨ generic provider ä¸å›ºå®š URLï¼ˆdev ä½¿ç”¨ç¤ºä¾‹ URLï¼‰ï¼›ä¸ UpdateService/UpdateSystem ç›´æ¥è®¿é—® GitHub Releases çš„æ›´æ–°æºå£å¾„ä¸ä¸€è‡´ï¼Œä¸”æ¸ é“æ˜ å°„æœªåœ¨å‘å¸ƒé…ç½®ä¸­æ˜¾å¼è¡¨è¾¾ã€‚

âš ï¸ é£é™©ä¸æ³¨æ„äº‹é¡¹
- æ›´æ–°æºä¸å‘å¸ƒç®¡çº¿ä¸ä¸€è‡´ä¼šå¯¼è‡´æ— æ³•æ‹‰å–/ä¸‹è½½ï¼Œéœ€ä¸å‘å¸ƒæµç¨‹ååŒç¡®è®¤ã€‚
- èµ„äº§å‘½åæˆ–æ ¡éªŒç­–ç•¥ä¸ä¸€è‡´ä¼šå¯¼è‡´â€œæ— åŒ¹é…èµ„äº§â€æˆ–æ ¡éªŒå¤±è´¥ï¼Œéœ€è·¨å¹³å°éªŒè¯ã€‚
- UI/é€šçŸ¥é“¾è·¯åˆ†å‰å¯èƒ½å¯¼è‡´çŠ¶æ€ä¸åŒæ­¥ï¼Œéœ€è¦ç»Ÿä¸€äº‹ä»¶æ¥æºä¸çŠ¶æ€å­˜å‚¨ã€‚

ğŸ“ å‚è€ƒ
- `src/main/modules/update/UpdateService.ts`
- `src/main/modules/update/update-system.ts`
- `src/renderer/src/views/base/settings/SettingUpdate.vue`
- `src/renderer/src/modules/hooks/useUpdate.ts`
- `src/renderer/src/modules/update/GithubUpdateProvider.ts`
- `src/main/modules/download/notification-service.ts`
- `electron-builder.yml`
- `dev-app-update.yml`
- `package.json`
